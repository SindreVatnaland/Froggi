<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<title>Client disconnected</title>

		<!-- Inline the page's stylesheet. -->
		<style>
			body {
				width: 100vw;
				height: 100vh;
				font-family: helvetica, arial, sans-serif;
				padding: 1em;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			img {
				width: 48px;
				height: 48px;
			}

			h1 {
				font-style: italic;
				color: #000000;
			}

			p {
				margin-block: 1rem;
			}

			button {
				display: block;
			}

			* {
				margin: 0;
			}
		</style>
	</head>
	<body>
		<div>
			<img src="./favicon.ico" />
			<h1>Slp Client Disconnected</h1>
			<p>Make sure Slp Rank Client app is open</p>
			<p>Refresh the page</p>
			<p>On mobile scan a new QR code in Settings/Obs</p>
		</div>

		<!-- Inline the page's JavaScript file. -->
		<script>
			// Check if the server is responding and reload the page if it is.
			// This handles the case when the device is online, but the server
			// is offline or misbehaving.
			async function checkNetworkAndReload() {
				try {
					const response = await fetch('.');
					// Verify we get a valid response from the server
					if (response.status >= 200 && response.status < 500) {
						window.location.reload();
						return;
					}
				} catch {
					// Unable to connect to the server, ignore.
				}
				setTimeout(checkNetworkAndReload, 1000);
			}

			checkNetworkAndReload();
		</script>
	</body>
</html>
